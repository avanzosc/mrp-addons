<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="qc_inspection_tree_view" model="ir.ui.view">
        <field name="model">qc.inspection</field>
        <field name="inherit_id" ref="quality_control_oca.qc_inspection_tree_view" />
        <field name="arch" type="xml">
            <field name="success" position="before">
                <field name="operator_id" optional="show" />
                <field name="software" optional="show" />
            </field>
        </field>
    </record>

    <record id="qc_inspection_form_view" model="ir.ui.view">
        <field name="model">qc.inspection</field>
        <field name="inherit_id" ref="quality_control_oca.qc_inspection_form_view" />
        <field name="arch" type="xml">
            <field name="user" position="after">
                <field name="operator_id" />
            </field>
            <xpath
        expr="//field[@name='inspection_lines']//field[@name='success']"
        position="after"
      >
                <field name="component" />
            </xpath>
            <xpath expr="//page[2]" position="after">
                <page
          name="productioncontrol"
          string="Production control"
          groups="mrp.group_mrp_user"
          attrs="{'invisible': [('production_id', '=', False)]}"
        >
                    <field
            name="extended_quality_control_ids"
            nolabel="1"
            context="{'default_mrp_production_id': production_id}"
          >
                        <tree>
                            <field name="mrp_production_id" invisible="1" />
                            <field name="mrp_product_id" invisible="1" />
                            <field name="verification_type_id" optional="show" />
                            <field name="packaging_id" optional="show" />
                            <field name="lot_id" optional="show" />
                            <field name="quantity_produced" optional="show" />
                        </tree>
                        <form string="Production control">
                            <sheet>
                                <h1>
                                    <field
                    name="mrp_production_id"
                    class="oe_inline"
                    invisible="1"
                  />
                                </h1>
                                <group name="head">
                                    <group>
                                        <field name="mrp_product_id" invisible="1" />
                                        <field name="verification_type_id" />
                                        <field name="packaging_id" />
                                    </group>
                                    <group>
                                        <field name="lot_id" />
                                        <field name="quantity_produced" />
                                    </group>
                                    <separator string="Operators lines" colspan="4" />
                                    <field
                    name="operators_lines_ids"
                    nolabel="1"
                    colspan="4"
                    context="{'default_extended_quality_control_id': active_id}"
                  >
                                        <tree>
                                            <field
                        name="extended_quality_control_id"
                        invisible="1"
                      />
                                            <field name="operator_id" optional="show" />
                                            <field
                        name="control_date"
                        optional="show"
                      />
                                            <field
                        name="start_hour"
                        widget="float_time"
                        optional="show"
                      />
                                            <field
                        name="final_hour"
                        widget="float_time"
                        optional="show"
                      />
                                            <field
                        name="total_time"
                        widget="float_time"
                        optional="show"
                      />
                                            <field name="cause" optional="show" />
                                            <field
                        name="component_id"
                        optional="show"
                      />
                                            <field name="solution_id" optional="show" />
                                            <field name="quantity" optional="show" />
                                        </tree>
                                        <form string="Production control lines">
                                            <sheet>
                                                <h1>
                                                    <field
                            name="extended_quality_control_id"
                            class="oe_inline"
                            invisible="1"
                          />
                                                </h1>
                                                <group name="head">
                                                    <group>
                                                        <field name="operator_id" />
                                                        <field name="control_date" />
                                                        <field name="component_id" />
                                                        <field name="solution_id" />
                                                    </group>
                                                    <group>
                                                        <field
                              name="start_hour"
                              widget="float_time"
                            />
                                                        <field
                              name="final_hour"
                              widget="float_time"
                            />
                                                        <field
                              name="total_time"
                              widget="float_time"
                            />
                                                    </group>
                                                    <group>
                                                        <field name="cause" />
                                                    </group>
                                                    <group>
                                                        <field name="quantity" />
                                                    </group>
                                                </group>
                                            </sheet>
                                        </form>
                                    </field>
                                </group>
                            </sheet>
                        </form>
                    </field>
                </page>
             </xpath>
        </field>
    </record>

    <record id="qc_inspection_form_view_picking" model="ir.ui.view">
        <field name="model">qc.inspection</field>
        <field
      name="inherit_id"
      ref="quality_control_stock_oca.qc_inspection_form_view_picking"
    />
        <field name="arch" type="xml">
            <field name="lot_id" position="after">
                <field name="software" />
            </field>
        </field>
    </record>

    <record id="qc_inspection_form_view_production" model="ir.ui.view">
        <field name="model">qc.inspection</field>
        <field
      name="inherit_id"
      ref="quality_control_mrp_oca.qc_inspection_form_view_production"
    />
        <field name="arch" type="xml">
            <field name="production_id" position="after">
                <field name="print_production_information" />
            </field>
        </field>
    </record>

    <record id="qc_inspection_search_view" model="ir.ui.view">
        <field name="model">qc.inspection</field>
        <field name="inherit_id" ref="quality_control_oca.qc_inspection_search_view" />
        <field name="arch" type="xml">
            <field name="user" position="after">
                <field name="operator_id" />
            </field>
            <filter name="group_by_user" position="after">
                <filter
          string="Operator"
          name="group_by_operator"
          domain="[]"
          context="{'group_by': 'operator_id'}"
        />
            </filter>
        </field>
    </record>

    <record id="qc_inspection_search_view_picking" model="ir.ui.view">
        <field name="model">qc.inspection</field>
        <field
      name="inherit_id"
      ref="quality_control_stock_oca.qc_inspection_search_view_picking"
    />
        <field name="arch" type="xml">
            <field name="lot_id" position="after">
                <field name="software" />
            </field>
        </field>
    </record>
 </odoo>
