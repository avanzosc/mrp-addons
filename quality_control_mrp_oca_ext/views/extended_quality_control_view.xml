<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="extended_quality_control_tree_view" model="ir.ui.view">
        <field name="name">extended.quality.control.tree.view</field>
        <field name="model">extended.quality.control</field>
        <field name="arch" type="xml">
            <tree>
                <field name="mrp_production_id" optional="show" />
                <field name="mrp_product_id" optional="show" />
                <field name="verification_type_id" optional="show" />
                <field name="packaging_id" optional="show" />
                <field name="lot_id" optional="show" />
                <field name="quantity_produced" optional="show" />
            </tree>
        </field>
    </record>

    <record id="extended_quality_control_search_view" model="ir.ui.view">
        <field name="name">extended.quality.control.search.view</field>
        <field name="model">extended.quality.control</field>
        <field name="arch" type="xml">
            <search string="Search production control">
                <field name="mrp_production_id" />
                <field name="mrp_product_id" />
                <field name="verification_type_id" />
                <field name="packaging_id" />
                <group expand="1" string="Group By">
                    <filter
            string="Manufacturing order"
            name="group_manufacturing_order"
            domain="[]"
            context="{'group_by':'mrp_production_id'}"
          />
                    <filter
            string="Product to produce"
            name="group_mrp_product"
            domain="[]"
            context="{'group_by':'mrp_product_id'}"
          />
                    <filter
            string="Operation"
            name="group_verification_type"
            domain="[]"
            context="{'group_by':'verification_type_id'}"
          />
                    <filter
            string="Failure type"
            name="group_packaging"
            domain="[]"
            context="{'group_by':'packaging_id'}"
          />
                </group>
            </search>
        </field>
    </record>

    <record id="extended_quality_control_form_view" model="ir.ui.view">
        <field name="name">extended.quality.control.form.view</field>
        <field name="model">extended.quality.control</field>
        <field name="arch" type="xml">
            <form string="Production control">
                <sheet>
                    <label string="Manufacturing order" for="mrp_production_id" />
                    <h1>
                        <field
              name="mrp_production_id"
              class="oe_inline"
              required="1"
            />
                    </h1>
                    <group name="head">
                        <group>
                            <field name="mrp_product_id" readonly="1" />
                            <field name="verification_type_id" />
                            <field name="packaging_id" />
                        </group>
                        <group>
                            <field name="lot_id" />
                            <field name="quantity_produced" />
                        </group>
                        <separator string="Operators lines" colspan="4" />
                        <field
              name="operators_lines_ids"
              nolabel="1"
              colspan="4"
              context="{'default_extended_quality_control_id': active_id}"
            >
                            <tree>
                                <field
                  name="extended_quality_control_id"
                  invisible="1"
                />
                                <field name="operator_id" optional="show" />
                                <field name="control_date" optional="show" />
                                <field
                  name="start_hour"
                  widget="float_time"
                  optional="show"
                />
                                <field
                  name="final_hour"
                  widget="float_time"
                  optional="show"
                />
                                <field
                  name="total_time"
                  widget="float_time"
                  optional="show"
                />
                                <field name="cause" optional="show" />
                                <field name="component_id" optional="show" />
                                <field name="solution_id" optional="show" />
                                <field name="quantity" optional="show" />
                            </tree>
                            <form string="Production control lines">
                                <sheet>
                                    <h1>
                                        <field
                      name="extended_quality_control_id"
                      class="oe_inline"
                      invisible="1"
                    />
                                    </h1>
                                    <group name="head">
                                        <group>
                                            <field name="operator_id" />
                                            <field name="control_date" />
                                            <field name="component_id" />
                                            <field name="solution_id" />
                                        </group>
                                        <group>
                                            <field
                        name="start_hour"
                        widget="float_time"
                      />
                                            <field
                        name="final_hour"
                        widget="float_time"
                      />
                                            <field
                        name="total_time"
                        widget="float_time"
                      />
                                        </group>
                                        <group>
                                            <field name="cause" />
                                        </group>
                                        <group>
                                            <field name="quantity" />
                                        </group>>
                                    </group>
                                </sheet>
                            </form>
                        </field>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_extended_quality_control_view" model="ir.actions.act_window">
        <field name="name">Production control</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">extended.quality.control</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem
    id="extended_quality_control_option_view"
    name="Production control"
    action="action_extended_quality_control_view"
    parent="mrp.menu_mrp_manufacturing"
    groups="mrp.group_mrp_user"
  />

    <menuitem
    name="Production control"
    parent="quality_control_oca.qc_menu"
    id="extended_quality_control_option_view2"
    action="action_extended_quality_control_view"
    groups="mrp.group_mrp_manager"
  />
 </odoo>
